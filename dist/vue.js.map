{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\n\nexport function observe (data) {\n  // 对object劫持\n  if (typeof data !== 'object' || data == null) {\n    return;//只对对象劫持\n  }\n  // 判断对象是否背劫持过,被劫持过的数据不需要再劫持,增添一个实例判断\n  return new Observer(data);\n}\n\nclass Observer{\n  constructor(data) {\n    // Object.defineProperty只能劫持已存在的属性,vue2里会单独写一些api,$set $delete\n    // 遍历对象\n    this.walk(data);\n  }\n  walk(data) {\n    // 循环对象,对属性依次劫持\n    // 重新定义属性\n    Object.keys(data).forEach(key => defineReactive(data, key,data[key]))\n  }\n}\n\n// 重新定义为响应式数据;闭包;属性劫持\nexport function defineReactive(target, key, value) {\n  // 对所有的对象哦度进行属性劫持\n  observe(value)\n  Object.defineProperty(target, key, {\n    // 取值时执行\n    get() {\n      console.log('get');\n      return value;\n    },\n    // 赋值时执行\n    set(newValue) {\n      console.log('set');\n      if (newValue === value) return;\n      value = newValue;\n    }\n  })\n}","\nimport {observe} from './observe/index.js';\n\nexport function initState(vm) {\n  const opts = vm.$options\n  // data\n  if(opts.data) {\n    initData(vm)\n  }\n  // props....\n}\n// 初始化data\nexport function initData(vm) {\n  let data = vm.$options.data\n  data = typeof data === 'function' ? data.call(vm) : data;\n  // vue2对数据进行劫持\n  vm._data = data;\n  observe(data)\n\n  // 将vm._data用vm代理\n  for (const key in data) {\n    proxy(vm, key, '_data')\n  }\n}\n\n// 将vm.xxx  代理到vm._data.xxx\nfunction proxy(vm, key, target) {\n  Object.defineProperty(vm, key, {\n    // 从vm取值时,实际从vm._data上取值\n    get() {\n      return vm[target][key]\n    },\n    set(newVaule) {\n      vm[target][key] = newVaule\n    }\n  })\n}","\nimport { initState } from \"./state\";\n\n// 扩展init方法\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = options//将选项挂载到实例上\n    // 初始化状态\n    initState(vm)\n  }\n}\n\n\n","import { initMixin } from \"./init\";\n\nfunction Vue(options) {\n  this._init(options)\n}\n\ninitMixin(Vue)//扩展init方法\n\nexport default Vue"],"names":["observe","data","_typeof","Observer","_classCallCheck","walk","_createClass","key","value","Object","keys","forEach","defineReactive","target","defineProperty","get","console","log","set","newValue","initState","vm","opts","$options","initData","call","_data","proxy","newVaule","initMixin","Vue","prototype","_init","options"],"mappings":"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"}